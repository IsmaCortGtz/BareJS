let BareJS={};"undefined"!=typeof BAREJS_CONFIG_FILE&&null!==BAREJS_CONFIG_FILE&&(BareJS.config=BAREJS_CONFIG_FILE),BareJS.Components=class{static Component;static current=void 0;static CACHE={WC_COMPONENT:{},HC_COMPONENT:{}};static newWC(e,t){this.CACHE.WC_COMPONENT[e]=t}static createWC(e){if(this.CACHE.WC_COMPONENT[e])return new this.CACHE.WC_COMPONENT[e];throw new Error(`Component '${e}' doesn't exist.`)}static loadWC(e,t){var n=""+BareJS.config.root+BareJS.config.components.components_folder+e+".js";if(this.CACHE.WC_COMPONENT[e])return t();var o=document.createElement("script");o.onload=()=>{customElements.define("barejs-custom-"+e.toLowerCase(),this.CACHE.WC_COMPONENT[e]),t()},o.src=n,document.body.appendChild(o)}static loadHC(e,o){let r=""+BareJS.config.root+BareJS.config.components.components_folder+e+".html";if(void 0!==this.CACHE.HC_COMPONENT[r])return this.CACHE.HC_COMPONENT[r].then(e=>o(e));this.CACHE.HC_COMPONENT[r]=new Promise((t,n)=>{fetch(r).then(e=>e.text()).then(e=>{t(e),o(e)}).catch(e=>n(e))})}},BareJS.Components.Component=class extends HTMLElement{#componentName;#componentType;constructor(){super()}connectedCallback(){if(!(this.parentNode instanceof BareJS.Components.Component&&this.parentNode.getAttribute("bjs-component")?.startsWith("hc:"))){var e=this.getAttribute("bjs-component");if(!e)throw new Error("Atributte 'bjs-component' not found.");e=e.split(":");if(2!=e.length)throw new Error("Invalid 'bjs-component'.");if(this.#componentType=e[0],["wc","hc"].includes(this.#componentType))return this.#componentName=e[1],"wc"===this.#componentType?BareJS.Components.loadWC(this.#componentName,()=>{this.renderWc()}):"hc"===this.#componentType?BareJS.Components.loadHC(this.#componentName,e=>{this.renderHc(e)}):void 0;throw new Error("Invalid 'bjs-component' type.")}console.log("[BAREJS-COMPONENT] Skipping. Component nested.")}renderWc(){var e=this.attachShadow({mode:"open"});let n=BareJS.Components.createWC(this.#componentName);n.innerHTML=this.innerHTML,this.innerHTML="",Array.from(this.attributes).forEach(e=>{var t;e.name.startsWith("barejs-")&&(t=e.name.substring(7),n.setAttribute(t,e.value))}),e.appendChild(n)}renderHc(e){var t=this.innerHTML;this.innerHTML="";let n=this.attachShadow({mode:"open"}),o={};Array.from(this.attributes).forEach(e=>{var t;e.name.startsWith("barejs-")&&(t=e.name.substring(7),o[t]=e.value)});var r=`${this.#componentName}-${Date.now()}-`+Math.floor(1e5*Math.random());this.setAttribute("id",r);r=(new DOMParser).parseFromString(`<html><head></head><body>${e}</body></html>`,"text/html");r.querySelectorAll("head > script");let s="",a=this;for(;;){var i=a.getRootNode();if(!(i instanceof ShadowRoot)){s=`document.getElementById("${a.id}").shadowRoot`+s;break}s=`.getElementById("${a.id}").shadowRoot`+s,a=i.host}e=document.createElement("script");e.innerHTML=`{BareJS.Components.current={};BareJS.Components.current.shadowRoot=${s};BareJS.Components.current.props=JSON.parse('${JSON.stringify(o)}');}`,n.appendChild(e),r.querySelectorAll("body > *").forEach(e=>{if(!(e instanceof HTMLScriptElement))return n.appendChild(e);var t=document.createElement("script");t.innerHTML=e.innerHTML,n.appendChild(t)}),n.innerHTML=n.innerHTML.replaceAll("<slot></slot>",t)}},customElements.define("barejs-component",BareJS.Components.Component);